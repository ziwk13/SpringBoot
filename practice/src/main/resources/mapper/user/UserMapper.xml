<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.shining.practice.user.mapper.UserMapper">

  <select id="selectUserCount" resultType="long">
    SELECT COUNT(*)
      FROM tbl_user
  </select>
  
  <select id="selectUserList" resultType="UserDTO">
    SELECT uid, username, password, nickname, created_at
      FROM tbl_user
      ODER BY uid ${sort}
      LIMIT #{offset}, #{size}
  </select>
  
  <select id="selectUserById" resultType="UserDTO">
    SELECT uid, username, password, nickname, created_at
      FROM tbl_user
     WHERE uid = #{uid}
  </select>
  
  <insert id="createUser" useGeneratedKeys="true" keyProperty="uid">
    INSERT INTO tbl_user(username, password, nickname, created_at)
    VALUE (#{username}, #{password}, #{nickname}, NOW())
  </insert>
  
  <update id="updateUser">
    UPDATE tbl_user
       SET password = #{password},
           nickname = #{nickname}
     WHERE uid = #{uid}
  </update>
  
  <delete id="deleteUser">
    DELETE
      FROM tbl_user
     WHERE uid = #{uid}
  </delete>
</mapper>